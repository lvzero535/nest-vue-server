> Middleware → Guard → Interceptor (before) → Pipe → Controller → Service (Provider) → Interceptor (after) → Exception Filter

| 组件                   | 位置/顺序                          | 作用                                                                              |
| ---------------------- | ---------------------------------- | --------------------------------------------------------------------------------- |
| **Middleware**         | 第一个被调用（作用于路由之前）     | 类似 Express 中间件，用于处理请求（如日志、认证、请求修改等），不能访问路由参数。 |
| **Guard**              | 在管道（Pipe）之前执行             | 用于权限控制，返回 `true` 允许继续处理，否则抛出异常。                            |
| **Interceptor**        | 分别在方法执行**前后**调用         | 可拦截请求/响应（如日志记录、响应映射、缓存、延迟等）。                           |
| **Pipe**               | 在控制器处理方法调用前执行         | 用于**转换**和**验证**请求参数（如 DTO 验证、类型转换）。                         |
| **Controller**         | 接收请求，调用服务处理             | 处理业务入口，一般只负责路由绑定与简单逻辑，复杂逻辑交由 Service 处理。           |
| **Provider / Service** | 被 Controller 或其他 Provider 调用 | 处理核心业务逻辑，通常是复用性强、可注入的类。                                    |
| **Exception Filter**   | 在请求生命周期最后处理异常         | 捕获 controller/service 中未处理的异常，返回友好的响应。                          |
